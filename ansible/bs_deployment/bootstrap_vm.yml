- name: Configure VM
  hosts: all
  become: true

  vars:
    compose_file: "../../docker/compose.example.yml"

  # NOTE: separate deployment from server configuration
  tasks:
    - name: Configure Host
      ansible.builtin.include_role:
        name: install_docker

    - name: Add compose file to host
      ansible.builtin.copy:
        src: "{{ compose_file }}" # no relative paths if possible
        dest: /opt/compose.yml # TODO: create a directory/mount point to store app related data in
        owner: fedora
        group: fedora
        mode: u=rw,g=r,o=r